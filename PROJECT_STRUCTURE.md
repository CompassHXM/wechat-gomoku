# é¡¹ç›®ç»“æ„æ€»è§ˆ

## ğŸ“‚ ç›®å½•ç»“æ„

```
wechat-gomoku/                      # é¡¹ç›®æ ¹ç›®å½•
â”‚
â”œâ”€â”€ ğŸ“„ README.md                    # é¡¹ç›®ä¸»æ–‡æ¡£
â”œâ”€â”€ ğŸ“„ PROJECT_REFACTOR.md          # é¡¹ç›®é‡æ„è®°å½•
â”œâ”€â”€ ğŸ“„ package.json                 # æ ¹ç›®å½•ä¾èµ–é…ç½®
â”œâ”€â”€ ğŸ“„ tsconfig.json                # TypeScript ç¼–è¯‘é…ç½®
â””â”€â”€ ğŸ“„ .gitignore                   # Git å¿½ç•¥è§„åˆ™
â”‚
â”œâ”€â”€ ğŸ“š docs/                        # ğŸ“š ç»Ÿä¸€æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“„ README.md                # æ–‡æ¡£ç´¢å¼•
â”‚   â”œâ”€â”€ ğŸ“„ API_DOCUMENTATION.md     # API æ¥å£æ–‡æ¡£
â”‚   â”œâ”€â”€ ğŸ“„ DESIGN_DOCUMENT.md       # ç³»ç»Ÿè®¾è®¡æ–‡æ¡£
â”‚   â”œâ”€â”€ ğŸ“„ äº‘å¼€å‘é…ç½®è¯´æ˜.md         # äº‘å¼€å‘è¯´æ˜ï¼ˆå·²åœç”¨ï¼‰
â”‚   â”œâ”€â”€ ğŸ“„ äº‘æœåŠ¡æ–¹æ¡ˆå¯¹æ¯”.md         # äº‘æœåŠ¡æ–¹æ¡ˆå¯¹æ¯”
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ deployment/              # éƒ¨ç½²ç›¸å…³æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ Azureéƒ¨ç½²æŒ‡å—.md     # Azure å®Œæ•´éƒ¨ç½²æŒ‡å—
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ AZURE_DEPLOY_GO.md  # Go åç«¯éƒ¨ç½²æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ DEPLOYMENT_FIXES.md # éƒ¨ç½²é—®é¢˜ä¿®å¤è®°å½•
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ BACKEND_GO_README.md # Go åç«¯è¯´æ˜
â”‚   â”‚   â””â”€â”€ ğŸ“„ AZURE_RUNTIME_AND_DOCS_UPDATE.md
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ migration/               # è¿ç§»æŒ‡å—
â”‚       â””â”€â”€ ğŸ“„ MIGRATION_TO_GO.md   # TypeScript åˆ° Go è¿ç§»æŒ‡å—
â”‚
â”œâ”€â”€ ğŸ› ï¸ scripts/                     # ğŸ› ï¸ å·¥å…·è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“„ deploy-azure-go.ps1     # Go åç«¯è‡ªåŠ¨éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ ğŸ“„ test-backend-go.ps1     # Go åç«¯ API æµ‹è¯•
â”‚   â”œâ”€â”€ ğŸ“„ test-backend.ps1        # Node.js åç«¯ API æµ‹è¯•
â”‚   â””â”€â”€ ğŸ“„ database-init.js        # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”‚
â”œâ”€â”€ ğŸ“± miniprogram/                 # å¾®ä¿¡å°ç¨‹åºå‰ç«¯
â”‚   â”œâ”€â”€ ğŸ“„ app.ts                  # å°ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ ğŸ“„ app.json                # å°ç¨‹åºé…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ app.wxss                # å…¨å±€æ ·å¼
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ pages/                  # é¡µé¢ç›®å½•
â”‚   â”‚   â”œâ”€â”€ ğŸ“ index/              # é¦–é¡µï¼ˆæ¨¡å¼é€‰æ‹©ï¼‰
â”‚   â”‚   â”œâ”€â”€ ğŸ“ lobby/              # è”æœºå¤§å…ï¼ˆæˆ¿é—´åˆ—è¡¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ ğŸ“ game/               # æ¸¸æˆé¡µé¢ï¼ˆæ£‹ç›˜ï¼‰
â”‚   â”‚   â””â”€â”€ ğŸ“ logs/               # æ—¥å¿—é¡µé¢
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ utils/                  # å·¥å…·ç±»
â”‚       â”œâ”€â”€ ğŸ“„ config.ts           # é…ç½®æ–‡ä»¶ï¼ˆå¤šåç«¯æ”¯æŒï¼‰
â”‚       â”œâ”€â”€ ğŸ“„ api.ts              # API è¯·æ±‚å°è£…
â”‚       â”œâ”€â”€ ğŸ“„ websocket.ts        # WebSocket ç®¡ç†
â”‚       â””â”€â”€ ğŸ“„ util.ts             # é€šç”¨å·¥å…·å‡½æ•°
â”‚
â”œâ”€â”€ â­ backend-go/                  # Go åç«¯ï¼ˆæ¨èï¼‰
â”‚   â”œâ”€â”€ ğŸ“„ main.go                 # ä¸»å…¥å£
â”‚   â”œâ”€â”€ ğŸ“„ go.mod                  # Go ä¾èµ–ç®¡ç†
â”‚   â”œâ”€â”€ ğŸ“„ go.sum                  # ä¾èµ–æ ¡éªŒ
â”‚   â”œâ”€â”€ ğŸ“„ Dockerfile              # Docker é…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ Procfile                # Heroku éƒ¨ç½²é…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ .env.example            # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”‚   â”œâ”€â”€ ğŸ“„ .env                    # ç¯å¢ƒå˜é‡ï¼ˆä¸æäº¤ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ config/                 # é…ç½®æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ database.go         # Cosmos DB é…ç½®
â”‚   â”‚   â””â”€â”€ ğŸ“„ pubsub.go           # Web PubSub é…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ services/               # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ room.go             # æˆ¿é—´ç®¡ç†ï¼ˆåˆ›å»º/æŸ¥è¯¢ï¼‰
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ game.go             # æ¸¸æˆé€»è¾‘ï¼ˆåŠ å…¥/ä¸‹æ£‹ï¼‰
â”‚   â”‚   â””â”€â”€ ğŸ“„ cleanup.go          # æ¸…ç†é€»è¾‘ï¼ˆç¦»å¼€/è‡ªåŠ¨æ¸…ç†ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ routes/                 # API è·¯ç”±
â”‚   â”‚   â””â”€â”€ ğŸ“„ routes.go           # è·¯ç”±å®šä¹‰
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ types/                  # æ•°æ®ç±»å‹
â”‚       â””â”€â”€ ğŸ“„ types.go            # ç±»å‹å®šä¹‰
â”‚
â”œâ”€â”€ ğŸ”µ backend-nodejs/              # Node.js åç«¯ï¼ˆå¤‡ç”¨ï¼‰
â”‚   â”œâ”€â”€ ğŸ“„ package.json            # npm ä¾èµ–é…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ tsconfig.json           # TypeScript é…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ Dockerfile              # Docker é…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ Procfile                # Heroku éƒ¨ç½²é…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ .env.example            # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ src/                    # æºä»£ç 
â”‚       â”œâ”€â”€ ğŸ“„ index.ts            # æœåŠ¡å…¥å£
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ“ config/             # é…ç½®æ¨¡å—
â”‚       â”‚   â”œâ”€â”€ ğŸ“„ database.ts     # Cosmos DB é…ç½®
â”‚       â”‚   â””â”€â”€ ğŸ“„ pubsub.ts       # Web PubSub é…ç½®
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ“ services/           # ä¸šåŠ¡é€»è¾‘
â”‚       â”‚   â””â”€â”€ ğŸ“„ roomService.ts  # æˆ¿é—´æœåŠ¡
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ“ routes/             # API è·¯ç”±
â”‚       â”‚   â””â”€â”€ ğŸ“„ index.ts        # è·¯ç”±å®šä¹‰
â”‚       â”‚
â”‚       â””â”€â”€ ğŸ“ types/              # ç±»å‹å®šä¹‰
â”‚           â””â”€â”€ ğŸ“„ index.ts        # æ¥å£å®šä¹‰
â”‚
â””â”€â”€ ğŸ“ typings/                    # TypeScript ç±»å‹å£°æ˜
    â”œâ”€â”€ ğŸ“„ index.d.ts
    â””â”€â”€ ğŸ“ types/
        â””â”€â”€ ğŸ“ wx/                 # å¾®ä¿¡å°ç¨‹åºç±»å‹å£°æ˜
```

## ğŸ¯ ç›®å½•è¯´æ˜

### æ ¸å¿ƒç›®å½•

| ç›®å½• | è¯´æ˜ | å¤‡æ³¨ |
|------|------|------|
| `docs/` | æ‰€æœ‰é¡¹ç›®æ–‡æ¡£ | åŒ…å« APIã€è®¾è®¡ã€éƒ¨ç½²ç­‰æ–‡æ¡£ |
| `scripts/` | å·¥å…·è„šæœ¬ | éƒ¨ç½²ã€æµ‹è¯•ã€åˆå§‹åŒ–è„šæœ¬ |
| `miniprogram/` | å°ç¨‹åºå‰ç«¯ | TypeScript + å¾®ä¿¡å°ç¨‹åº |
| `backend-go/` | Go åç«¯ | æ¨èä½¿ç”¨ï¼Œæ€§èƒ½æ›´å¥½ |
| `backend-nodejs/` | Node.js åç«¯ | å¤‡ç”¨æ–¹æ¡ˆ |

### æ–‡æ¡£ç»„ç»‡

| å­ç›®å½• | å†…å®¹ |
|--------|------|
| `docs/` | æ ¸å¿ƒæ–‡æ¡£ï¼ˆAPIã€è®¾è®¡ã€äº‘æœåŠ¡å¯¹æ¯”ï¼‰ |
| `docs/deployment/` | éƒ¨ç½²ç›¸å…³æ–‡æ¡£ |
| `docs/migration/` | è¿ç§»æŒ‡å— |

### è„šæœ¬åˆ†ç±»

| è„šæœ¬ | ç”¨é€” |
|------|------|
| `deploy-azure-go.ps1` | è‡ªåŠ¨éƒ¨ç½² Go åç«¯åˆ° Azure |
| `test-backend-go.ps1` | æµ‹è¯• Go åç«¯ API |
| `test-backend.ps1` | æµ‹è¯• Node.js åç«¯ API |
| `database-init.js` | åˆå§‹åŒ– Cosmos DB |

## ğŸ”§ é‡è¦æ–‡ä»¶

### é…ç½®æ–‡ä»¶

- `miniprogram/utils/config.ts` - å‰ç«¯é…ç½®ï¼ˆæ”¯æŒå¤šåç«¯åˆ‡æ¢ï¼‰
- `backend-go/.env` - Go åç«¯ç¯å¢ƒå˜é‡
- `backend-nodejs/.env` - Node.js åç«¯ç¯å¢ƒå˜é‡
- `tsconfig.json` - TypeScript ç¼–è¯‘é…ç½®
- `.gitignore` - Git å¿½ç•¥è§„åˆ™

### å…¥å£æ–‡ä»¶

- `miniprogram/app.ts` - å°ç¨‹åºå…¥å£
- `backend-go/main.go` - Go åç«¯å…¥å£
- `backend-nodejs/src/index.ts` - Node.js åç«¯å…¥å£

### éƒ¨ç½²æ–‡ä»¶

- `backend-go/Dockerfile` - Go åç«¯å®¹å™¨åŒ–
- `backend-nodejs/Dockerfile` - Node.js åç«¯å®¹å™¨åŒ–
- `backend-go/Procfile` - Heroku é…ç½®
- `scripts/deploy-azure-go.ps1` - Azure è‡ªåŠ¨éƒ¨ç½²

## ğŸ“ æ–‡ä»¶å‘½åè§„èŒƒ

### TypeScript æ–‡ä»¶
- æºç : `*.ts`
- ç¼–è¯‘äº§ç‰©: `*.js`ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼Œä¸æäº¤åˆ° Gitï¼‰
- æ ·å¼: `*.wxss`
- æ¨¡æ¿: `*.wxml`
- é…ç½®: `*.json`

### Go æ–‡ä»¶
- æºç : `*.go`
- é…ç½®: `go.mod`, `go.sum`
- ç¼–è¯‘äº§ç‰©: `main`ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼Œä¸æäº¤ï¼‰

### æ–‡æ¡£æ–‡ä»¶
- è‹±æ–‡: `UPPER_CASE.md`
- ä¸­æ–‡: `ä¸­æ–‡åç§°.md`
- ç‰¹å®šåç«¯: `*_GO.md`, `*_NODEJS.md`

### è„šæœ¬æ–‡ä»¶
- PowerShell: `*.ps1`
- JavaScript: `*.js`
- ç‰¹å®šåç«¯: `*-go.ps1`, `*-nodejs.ps1`

## ğŸš€ å¿«é€Ÿå¯¼èˆª

### å¼€å‘ç›¸å…³
- ğŸ“– [API æ–‡æ¡£](docs/API_DOCUMENTATION.md)
- ğŸ—ï¸ [ç³»ç»Ÿè®¾è®¡](docs/DESIGN_DOCUMENT.md)
- ğŸ“± [å°ç¨‹åºé…ç½®](miniprogram/utils/config.ts)

### éƒ¨ç½²ç›¸å…³
- ğŸš€ [Azure éƒ¨ç½²æŒ‡å—](docs/deployment/Azureéƒ¨ç½²æŒ‡å—.md)
- â­ [Go åç«¯éƒ¨ç½²](docs/deployment/AZURE_DEPLOY_GO.md)
- ğŸ”§ [éƒ¨ç½²é—®é¢˜ä¿®å¤](docs/deployment/DEPLOYMENT_FIXES.md)

### åç«¯å¼€å‘
- â­ [Go åç«¯å…¥å£](backend-go/main.go)
- ğŸ”µ [Node.js åç«¯å…¥å£](backend-nodejs/src/index.ts)
- ğŸ”„ [è¿ç§»æŒ‡å—](docs/migration/MIGRATION_TO_GO.md)

### æµ‹è¯•å’Œè„šæœ¬
- ğŸ§ª [Go åç«¯æµ‹è¯•](scripts/test-backend-go.ps1)
- ğŸ§ª [Node.js åç«¯æµ‹è¯•](scripts/test-backend.ps1)
- ğŸš€ [è‡ªåŠ¨éƒ¨ç½²](scripts/deploy-azure-go.ps1)
